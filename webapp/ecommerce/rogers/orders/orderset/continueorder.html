#set($orderset = $context.getSessionValue("orderset"))
#if($orderset)
	#if($orderset.getNumberOfOrders() > 0)
		#set($productsearcher = $searcherManager.getSearcher($catalogid, "product"))
		#set($storesearcher = $searcherManager.getSearcher($catalogid, "rogersstore"))
		
		<div class="ui-widget uipanel">
			<div class="ui-widget-header"><a id="topofpage"></a>Rogers Corporate Orders</div>
			<div class="ui-widget-content">
				<div class="rogers-summary-details">
					<a href="#bottom" class="btn">Jump to the Bottom of the page</a>
				</div>
				<h3 style="margin-top: 15px;">The following orders have been removed because they don't have any items.</h3>
				<div>
					<ul>
				#set($removedorders = $orderset.getRemovedOrders())
				#foreach($order in $removedorders)
					#set($customerid = $order.getCustomer().getId())
					#set($id = $customerid.split("-"))
					#set($storeid = $id.get(1))
					#set($rogersstore = $storesearcher.searchById($storeid))
							<li>$order.getId() - $storeid - $rogersstore.get("name")</li>
				#end
					</ul>
				</div>
				<h3 style="margin-top: 15px;">Click the order number to expand and view.</h3>
				<h3 style="margin-bottom: 15px;">Click the order number again to close. </h3>
				#set($orders = $orderset.getOrders())
				#set($ctr = 0)
				#foreach($order in $orders)
					#set($customerid = $order.getCustomer().getId())
					#set($id = $customerid.split("-"))
					#set($storeid = $id.get(1))
					#set($rogersstore = $storesearcher.searchById($storeid))
				<div class="rogers-summary">
					<ul>
						<li><a href="#" class="order-row" data-orderid="$order.getId()">$order.getId()</a></li>
						<li>$storeid - $rogersstore.get("name")</li>
						<li class="total">Order Total: $order.getTotalPrice()</li>
					</ul>
				</div>
				<div class="rogers-summary-details" id="order-$order.getId()" style="display: none">
					<table style="width: 100%;">
						<tr>
							<td class="rogers-summary-product-id"><strong>Product ID<strong></td>
							<td class="rogers-summary-product-name">Product</td>
							<td class="rogers-summary-product-quantity">Quantity</td>
							<td class="rogers-summary-product-price">Price</td>
							<td class="rogers-summary-line-total">Line Total</td>
						</tr>
						#set($cartitems = $order.getItems())
						#foreach($cartitem in $cartitems)
						<tr>
							#set($product = $cartitem.getProduct())
							<td class="rogers-summary-product-id">$product.get("rogerssku")</td>
							<td class="rogers-summary-product-name">$product.getName()</td>
							<td class="rogers-summary-product-quantity">$cartitem.getQuantity()</td>
							<td class="rogers-summary-product-price">$cartitem.getYourPrice()</td>
							<td class="rogers-summary-line-total">$cartitem.getTotalPrice()</td>
						</tr>
						#end
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px;">Subtotal:</span><strong>$order.getSubTotal()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px;">Shipping:</span><strong>$order.getTotalShipping()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px;">Taxes:</span><strong>$order.getTax()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5" style="padding-bottom: 20px;"><span style="margin-right: 20px;">Total:</span><strong>$order.getTotalPrice()</strong></td>
						</tr>
					</table>
				</div>
				#end
				<a id="bottom"></a>
				<div class="rogers-summary" style="margin-top: 10px;">
					<table>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px; float: left;">Final Sub-Total:</span><strong>$orderset.getSubTotal()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px; float: left;">Final Shipping:</span><strong>$orderset.getTotalShipping()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px; float: left;">Final Taxes:</span><strong>$orderset.getTotalTaxes()</strong></td>
						</tr>
						<tr>
							<td class="rogers-summary-totals" colspan="5"><span style="margin-right: 20px; float: left; margin-bottom: 10px;">Final Total:</span><strong>$orderset.getTotalPrice()</strong></td>
						</tr>
						<tr>
							<td style="padding: 3px; text-align: right; font-size: 12px;" colspan="6">
								<form action="processorders.html" method="post">
									<input type="hidden" name="action" value="processorder">
									<input type="hidden" name="orderset" value="${orderset}">
									#set($size = $orderset.getNumberOfOrders())
									<input type="submit" name="submit" value="Continue and Process all ${size} order(s)" class="btn">
								</form>
							</td>
						</tr>
					</table>
				</div>
				<div class="rogers-summary" style="margin-top: 10px;"><a href="#topofpage" class="btn">Back to Top of Page</a>
			</div>
		</div>
	#else
	<div class="ui-widget uipanel">
		<div class="ui-widget-header">Rogers Orders</div>
		<div class="ui-widget-content">
		<h2>Sorry but you don't have any orders.</h2>
		<p style="width: 800px; margin-left: auto; margin-right: auto; margin-top: 8px;">
		I am sorry after processing your CSV file, there are no orders.<br>
		Please click <a href="$home$apphome/rogers/orders/rogersorder.html" style="font-size: 14px; color: blue;">here</a> to 
		re-import another order.</p>
		</div>
	</div>
	#end
#else
	<div class="ui-widget uipanel">
		<div class="ui-widget-header">Rogers Session Expired</div>
		<div class="ui-widget-content">
		<h2>Sorry. Your session has expired.</h2>
		<p style="width: 800px; margin-left: auto; margin-right: auto; margin-top: 8px;">
		I am sorry that we could not continue with your request. Your session has expired.<br>
		Please click <a href="$home$apphome/rogers/orders/rogersorder.html" style="font-size: 14px; color: blue;">here</a> to 
		re-import your order.</p>
		</div>
	</div>
#end
<script type="text/javascript">
	$(document).ready(function(){
		$(".order-row").click(function() {
			var orderid = $(this).data("orderid");
			$("#order-" + orderid).toggle(500);
			return false;
		});
	});
</script>
