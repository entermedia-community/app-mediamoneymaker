#set($userprofilesearcher = $mediaarchive.getSearcher("userprofile"))
#set($productsearcher = $mediaarchive.getSearcher("product"))

#set($url = $context.getRequestParameter("url"))
#set($totalrows = $context.getRequestParameter("totalrows"))
#set($badrows = $context.getRequestParameter("badrows"))
#set($goodproductlist = $context.getContentProperty("goodproductlist"))
#set($badproductlist = $context.getContentProperty("badproductlist"))
#set($badupclist = $context.getContentProperty("badpupclist"))
#set($badqtylist = $context.getContentProperty("badqtylist"))
#set($distributor = $context.getRequestParameter("distributor"))

<h2>Update Inventory Report</h2>
<h3>Distributor: $distributor</h3>
#if($url)
	<p>Import URL: $url</p>
#end
<p>Total Rows Processed: $totalrows</p>
<p>Total Products Properly Processed: $goodproductlist.size()</p>
#if( $badrows.size() > 0)
	<h3>Bad Row List: $badrows.size() Row(s)</h3>
	<ul>
	#foreach($row in $badrows)
		<li>$row</li>
	#end
	</ul>
#end
#if( $badproductlist.size() > 0)
	<h3>Bad Product List: $badproductlist.size() Product(s)</h3>
	<p>Note: These items are product SKUs that could not be found in our system.</p>
	<ul>
	#foreach($product in $badproductlist)
		<li>$product</li>
	#end
	</ul>
#end
#if( $badupclist.size() > 0)
	<h3>Bad UPC List: $badupclist.size() Product(s)</h3>
	<p>Note: These items are product UPCs that could not be found in our system.</p>
	<ul>
	#foreach($product in $badupclist)
		#set($p = $productsearcher.searchByField("upc", $product))
		<li>$product #if($p) - $p.get("rogerssku") - $p.get("manufacturersku") #end</li>
	#end
	</ul>
#end
#if( $badqtylist.size() > 0)
	<h3>Bad QTY List: $badqtylist.size() Product(s)</h3>
	<p>Note: For these products, the Quantity On Hand value was invalid.<br/>
	Values were trimmed at the decimal.</p>
	<ul>
	#foreach($product in $badqtylist)
		<li>$product</li>
	#end
	</ul>
#end
